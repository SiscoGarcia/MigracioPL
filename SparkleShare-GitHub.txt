L'SparkleShare és una eina de sincronització i col·laborativa molt transparent per l'usuari, que no nota que hi és. Es troba en una versió molt incipient (beta) però està previst que es pugui disposar d'un servidor en local, de manera que l'usuari pugui tenir un control total de les dades... cal recordar que està feta amb programari lliure! També manté un registre dels canvis fets als fitxers (via web, de moment), amb la qual cosa si ens equivoquem sempre podem «revertir» els canvis, és a dir, tornar enrere. 

L'SparkleShare és una aplicació que s'aprofita d'eines de comparació de versions en treballs col·laboratius, com és el cas del Gitorius (http://www.gitorious.org/) i del GitHub (http://www.github.com/). Per la qual cosa, i mentre no hi hagi la possibilitat d'instal·lar un servidor propi d'SparkleShare cal tenir obert un compte en alguna d'aquestes aplicacions.

La manera de funcionar de l'SparkleShare és comparant la versió existent al servidor (el nostre compte de Git*) amb la que hi pugem, conservant sempre l'última modificada, i sincronitzant els canvis que fem tant al servidor com a la carpeta SparkleShare local, de manera que sempre tenim actualitzada l'última versió del document de què es tracti.

Aquesta idea original és modificada i permet fer servir el compte de Git* com un dipòsit de fitxers, característica comuna amb altres aplicacions; el que té de particular l'SparkleShare és que és una aplicació feta amb programari lliure i que aprofita eines també lliures, les quals permeten obrir comptes de forma gratuïta sempre que es comparteixi lliurement allò que s'hi penja. Aquests comptes són ilimitats, mentre que si volem aprofitar-ho per usos no lliures té un cost econòmic.

Així, en parlar de l'SparkleShare, i mentre no hi hagi la possibilitat d'emprar un servidor local, cal parlar del propi SparkleShare, i també de l'eina col·laborativa que triem, sigui el Gitorius o bé el GitHub.


Per tal d'instal·lar l'SparkleShare el que cal és:

Hem de baixar el paquet de http://www.sparkleshare.org (https://github.com/downloads/hbons/SparkleShare/sparkleshare-0.2-beta1.tar.gz), com que està fet amb C, cal satisfer un seguit de dependències, que als sistemes basats en debian es resolen amb:

~$ sudo apt-get install gtk-sharp2 monodevelop mono-devel libndesk-dbus1.0-cil-dev libndesk-dbus-glib1.0-cil-dev python-nautilus git-core intltool gvfs gvfs-bin python-gtk2-dev openssh-client

ara caldrà descomprimir el paquet amb:

~$ tar -zxvf sparkleshare-0.2-beta1.tar.gz 

ens situem a dintre del directori

~$ cd sparkleshare-0.2-beta1

i com que tenim satifetes les dependències només cal compilar el paquet amb les instruccions típiques:

~$ ./configure
~$ make
~$ sudo make install


Amb això ja tindrem instal·lat l'SparkleShare, ara caldrà configurar-lo.

A l'hora de treballar amb l'SparkleShare hem de fer les següents passes:

1.- crear un compte de Gitorius (http://gitorius.org) o de github (http://github.com)

2.- crear un parell de claus PGP i exportar-la al gitorius (prèviament cal haver-la publicat i sincronitzat a un servidor de claus), també es pot fer a github

3.- crear un dipòsit al gitorius [1] o al github [2] i després enllaçar la carpeta que volem compartir perquè estigui a l'abast de tothom

4.- configurar l'sparkleshare perquè hi apunti a aquesta carpeta

5.- sincronitzar la del gitorius o del github amb la de l'ordinador


[1] Comencem parlant del Gitorius:

Des del panell de control (Dashboard) punxem a «Create a new project», emplenem els camps necessaris i se'ns demana de crear un nou dipòsit. Aquest nom és el que anomenarem «Folder name».

Ara toca pujar la clau ssh pública al Gitorius per autenticar-nos. l'Sparkleshare ens n'ha creat una quan hem emplenat la pantalla «First Run Screen» (s'hi troba a la carpeta arrel de l'usuari, a la subcarpeta «.config/sparkleshare/» i és una cosa semblant a «sparkleshare.elteunom@server.com.key.pub»; cal copiar el contingut d'aquest fitxer, tornar al tauler de control, punxar «Manage SSH Keys» i «Add SSH Key», hi enganxem el contingut que hem copiat abans i desem («Save»).

Ara ja podem dir-li a l'SparkleShare que s'hi sincronitzi amb aquesta carpeta. Punxem la icona de notificació de l'SparkleShare i seleccionem «Sync Remote Folder...», triem «Gitorius» com al nostre servidor i introduim els noms del projecte i de la carpeta a «Folder Name». Només ens queda pitjar «Sync» per començar a sincronitzar!

(en el cas que ens ocupa la carpeta es troba a «seminaristac/seminaristac»)

Es poden crear més usuaris (col·laboradors), equips, etc. però això ja ho tractarem en un altre moment.

Cada vegada que fem alguna modificació (sobre els documents que hi tinguem o bé hi afegim alguna cosa nova) caldrà tornar a sincronitzar-nos (Premem la icona de notificació de l'SparkleShare i seleccionem «Sync Remote Folder...», triem «Gitorius» com al nostre servidor i introduim els noms del projecte i de la carpeta a «Folder Name». Només ens queda prémer «Sync» per començar a sincronitzar!), mentre que a la resta d'ordinadors que hi estan sincronitzats apareixerà una notificació d'aquesta modificació... és automàgic! 

Cal recordar que és una aplicació que encara es troba en fase beta, però té una sèrie de possibilitats de compartició i de possibilitat de control sobre els fitxers (en poder tenir les dades en un servidor propi) que li donen un valor afegit no igualat per les altres aplicacions semblants.





[2] Pel que fa al GitHub, cal començar instal·lant-lo a l'ordinador que vulguem tenir sincronitzat, de manera que el primer que cal fer és:

Download and install Git
  git config --global user.name "Your Name"
  git config --global user.email sisco.garcia@ubuntu.cat
        

Next steps:

  mkdir MigracioPL
  cd MigracioPL
  git init
  touch README
  git add README
  git commit -m 'first commit'
  git remote add origin git@github.com:SiscoGarcia/MigracioPL.git
  git push origin master
      

Existing Git Repo?

  cd existing_git_repo
  git remote add origin git@github.com:SiscoGarcia/MigracioPL.git
  git push origin master
      
Després:

https://github.com/SiscoGarcia/MigracioPL



Des del costat de l'SparkleShare:

4. Using SparkleShare with Github
4.1. How do I set up SparkleShare with Github?

First off, get an account on Github if you don't already have one.

From your Dashboard, click New Repository. Fill in the required fields. We will refer to the name of this repository as the Folder Name from here on.

Now it gets a bit tricky. We will have to upload a so called SSH Public Key to Github to authenticate. SparkleShare has already created one for you if you have filled in First Run Screen. You can find it in your Home Folder in the .config/sparkleshare/ subfolders. It looks like sparkleshare.yourname@server.com.key.pub, but ofcourse with your email adress filled in. Copy the contents of this file.

Go to your Account Settings. Click SSH Public Keys. Now click Add a public Key. Paste the contents of the file you just copied into the Key text field and give the key a Title. Hit Add key.

Now we can tell SparkleShare to sync with this folder. Click SparkleShare's Notification icon and select Sync Remote Folder.... Select Github as your server and enter your Github username and the folder name in the Folder Name entry.

Now click Sync to start syncing!
4.2. How do I add more collaborators on Github?

Your collaborator will have to get an account and add his or her SSH Public Key as described above, but he or she can skip the repository creation. Once that has finished you can easily add the person through the Github web interface.

On Github, go to your Dashboard select the appropriate repository under Your Repositories. Click Admin and then Collaborators. You can search for your collaborator's username by typing inside the text entry. Then hit Add to add the person.

Done! Now every user that is part of the team can sync with the folder.
5. Sharing files
5.1. How do I add files?

Just put your files in one of your SparkleShare project folders. You can do this by dragging files over or to save from directly from an application. SparkleShare will notice your changes. No manual syncing work for you anymore!
5.2. How do I share files with others?

Not only is everything in SparkleShare synced to your server, it will also automatically with all other clients connected to it. Again, no extra work!
5.3. I made a mistake. How do I revert my changes?

Right click the affected file. There will be a menu entry called Get Earlier Version. From there you can select an earlier version of the file you want to check out. SparkleShare will create a copy of this file in the same folder.
